# Default jet scale factors.
# - btagSF: taking from cvmfs
# - ctagSF: taking from cvmfs
# - jetPuID SF
# - jet veto maps

jet_scale_factors:
    # Collection used to apply btag SF and ctag SF
    jet_collection:
      btag: JetGood
      ctag: JetGood
      puId: JetGood
      
    btagSF:
        # DeepJet AK4 tagger shape SF
        '2016_PreVFP':
            file: ${cvmfs:Run2-2016postVFP-UL-NanoAODv9,BTV,btagging.json.gz}
            name: "deepJet_shape"
        '2016_PostVFP':
            file: ${cvmfs:Run2-2016preVFP-UL-NanoAODv9,BTV,btagging.json.gz}
            name: "deepJet_shape"
        '2017':
            file: ${cvmfs:Run2-2017-UL-NanoAODv9,BTV,btagging.json.gz}
            name: "deepJet_shape"
        '2018':
            file: ${cvmfs:Run2-2018-UL-NanoAODv9,BTV,btagging.json.gz}
            name: "deepJet_shape"
        '2022_preEE':
            file: ${cvmfs:Run3-22CDSep23-Summer22-NanoAODv12,BTV,btagging.json.gz}
            name: "deepJet_shape"
        '2022_postEE':
            file: ${cvmfs:Run3-22EFGSep23-Summer22EE-NanoAODv12,BTV,btagging.json.gz}
            name: "deepJet_shape"
        '2023_preBPix':
            file: ${cvmfs:Run3-23CSep23-Summer23-NanoAODv12,BTV,btagging.json.gz}
            name: "deepJet_shape"
        '2023_postBPix':
            file: ${cvmfs:Run3-23DSep23-Summer23BPix-NanoAODv12,BTV,btagging.json.gz}
            name: "deepJet_shape"
        '2024': 
            # Preliminary version of shape btag sfs. 
            # Need to change to BTV/2024_Summer24/btagging.json.gz, as soon as UParTAK4_kinfit available in there,
            # currently only btag wps in BTV/2024_Summer24/btagging.json.gz
            file: ${cvmfs:Run3-24CDEReprocessingFGHIPrompt-Summer24-NanoAODv15,BTV,btagging_preliminary.json.gz}
            name: "UParTAK4"

    ctagSF:
      # DeepJet AK4 tagger shape SF
      '2016_PreVFP':
        SF_file: ${cvmfs:Run2-2016preVFP-UL-NanoAODv9,BTV,ctagging.json.gz}
        Calib_file: "${default_params_dir:}/ctagSF_calibrationSF.json"
        name: "deepJet_shape"
      '2016_PostVFP':
        SF_file: ${cvmfs:Run2-2016postVFP-UL-NanoAODv9,BTV,ctagging.json.gz}
        Calib_file: "${default_params_dir:}/ctagSF_calibrationSF.json"
        name: "deepJet_shape"
      '2017':
        SF_file: ${cvmfs:Run2-2017-UL-NanoAODv9,BTV,ctagging.json.gz}
        Calib_file: "${default_params_dir:}/ctagSF_calibrationSF.json"
        name: "deepJet_shape"
      '2018':
        SF_file: ${cvmfs:Run2-2018-UL-NanoAODv9,BTV,ctagging.json.gz}
        Calib_file: "${default_params_dir:}/ctagSF_calibrationSF.json"
        name: "deepJet_shape"
      '2022_preEE':
        SF_file: ${cvmfs:Run3-22CDSep23-Summer22-NanoAODv12,BTV,ctagging.json.gz}
        Calib_file: "${default_params_dir:}/ctagSF_calibrationSF.json"
        name: "deepJet_shape"
      '2022_postEE':
        SF_file: ${cvmfs:Run3-22EFGSep23-Summer22EE-NanoAODv12,BTV,ctagging.json.gz}
        Calib_file: "${default_params_dir:}/ctagSF_calibrationSF.json"
        name: "deepJet_shape"
      '2023_preBPix':
        SF_file: ${cvmfs:Run3-23CSep23-Summer23-NanoAODv12,BTV,ctagging.json.gz}
        Calib_file: "${default_params_dir:}/ctagSF_calibrationSF.json"
        name: "deepJet_shape"
      '2023_postBPix':
        SF_file: ${cvmfs:Run3-23DSep23-Summer23BPix-NanoAODv12,BTV,ctagging.json.gz}
        Calib_file: "${default_params_dir:}/ctagSF_calibrationSF.json"
        name: "deepJet_shape"
      
    jet_puId:
        # Jet PU ID SF to be applied only on selected jets (pt<50) that are matched to GenJets
        # working points defined for different periods, due to bug values are different for 2016 
        # (see here https://twiki.cern.ch/twiki/bin/view/CMS/PileupJetIDUL#Trainings)
        '2016_PreVFP':
            file: ${cvmfs:Run2-2016preVFP-UL-NanoAODv9,JME,jmar.json.gz}
            working_point:
                L: 1
                M: 3
                T: 7
            name: PUJetID_eff
        '2016_PostVFP':
            file: ${cvmfs:Run2-2016postVFP-UL-NanoAODv9,JME,jmar.json.gz}
            working_point:
                L: 1
                M: 3
                T: 7
            name: PUJetID_eff
        '2017':
            file: ${cvmfs:Run2-2017-UL-NanoAODv9,JME,jmar.json.gz}
            working_point:
                L: 4
                M: 6
                T: 7
            name: PUJetID_eff
        '2018':
            file: ${cvmfs:Run2-2018-UL-NanoAODv9,JME,jmar.json.gz}
            working_point:
                L: 4
                M: 6
                T: 7
            name: PUJetID_eff

    vetomaps:
        '2022_preEE':
            file: ${cvmfs:Run3-22CDSep23-Summer22-NanoAODv12,JME,jetvetomaps.json.gz}
            name: "Summer22_23Sep2023_RunCD_V1"
        '2022_postEE':
            file: ${cvmfs:Run3-22EFGSep23-Summer22EE-NanoAODv12,JME,jetvetomaps.json.gz}
            name: "Summer22EE_23Sep2023_RunEFG_V1"
        '2023_preBPix':
            file: ${cvmfs:Run3-23CSep23-Summer23-NanoAODv12,JME,jetvetomaps.json.gz}
            name: "Summer23Prompt23_RunC_V1"
        '2023_postBPix':
            file: ${cvmfs:Run3-23DSep23-Summer23BPix-NanoAODv12,JME,jetvetomaps.json.gz}
            name: "Summer23BPixPrompt23_RunD_V1"
        '2024':
            file: ${cvmfs:Run3-24CDEReprocessingFGHIPrompt-Summer24-NanoAODv15,JME,jetvetomaps.json.gz}
            name: "Summer24Prompt24_RunBCDEFGHI_V1"
